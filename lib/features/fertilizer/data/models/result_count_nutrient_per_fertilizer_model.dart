import 'package:pfg_app/core/utils/date_format_util.dart';
import 'package:pfg_app/features/fertilizer/domain/entities/result_count_nutrient_per_fertilizer_entity.dart';

class ResultCountNutrientPerFertilizerModel extends ResultCountNutrientPerFertilizerEntity {
  const ResultCountNutrientPerFertilizerModel({
    int? id,
    required String idRacikan,
    required String fertilizerName,
    required double fertilizerWeightGrams,
    required double totalPercentNitrogen,
    required double totalGramNitrogen,
    required double totalPercentPosfor,
    required double totalGramPosfor,
    required double totalPercentKalium,
    required double totalGramKalium,
    required double totalPercentBoron,
    required double totalGramBoron,
    required double totalPercentTembaga,
    required double totalGramTembaga,
    required double totalPercentBesi,
    required double totalGramBesi,
    required double totalPercentMagnesium,
    required double totalGramMagnesium,
    required double totalPercentMangan,
    required double totalGramMangan,
    required double totalPercentMolibdenum,
    required double totalGramMolibdenum,
    required double totalPercentSeng,
    required double totalGramSeng,
    String? createdAt,
  }) : super(
          id: id,
          idRacikan: idRacikan,
          fertilizerName: fertilizerName,
          fertilizerWeightGrams: fertilizerWeightGrams,
          totalPercentNitrogen: totalPercentNitrogen,
          totalGramNitrogen: totalGramNitrogen,
          totalPercentPosfor: totalPercentPosfor,
          totalGramPosfor: totalGramPosfor,
          totalPercentKalium: totalPercentKalium,
          totalGramKalium: totalGramKalium,
          totalPercentBoron: totalPercentBoron,
          totalGramBoron: totalGramBoron,
          totalPercentTembaga: totalPercentTembaga,
          totalGramTembaga: totalGramTembaga,
          totalPercentBesi: totalPercentBesi,
          totalGramBesi: totalGramBesi,
          totalPercentMagnesium: totalPercentMagnesium,
          totalGramMagnesium: totalGramMagnesium,
          totalPercentMangan: totalPercentMangan,
          totalGramMangan: totalGramMangan,
          totalPercentMolibdenum: totalPercentMolibdenum,
          totalGramMolibdenum: totalGramMolibdenum,
          totalPercentSeng: totalPercentSeng,
          totalGramSeng: totalGramSeng,
          createdAt: createdAt,
  );

  Map<String, dynamic> toMap() {
    return {
      'id': id,
      'id_racikan': idRacikan,
      'fertilizer_name': fertilizerName,
      'fertilizer_weight_grams': fertilizerWeightGrams,
      'total_percent_nitrogen': totalPercentNitrogen,
      'total_gram_nitrogen': totalGramNitrogen,
      'total_percent_posfor': totalPercentPosfor,
      'total_gram_posfor': totalGramPosfor,
      'total_percent_kalium': totalPercentKalium,
      'total_gram_kalium': totalGramKalium,
      'total_percent_boron': totalPercentBoron,
      'total_gram_boron': totalGramBoron,
      'total_percent_tembaga': totalPercentTembaga,
      'total_gram_tembaga': totalGramTembaga,
      'total_percent_besi': totalPercentBesi,
      'total_gram_besi': totalGramBesi,
      'total_percent_magnesium': totalPercentMagnesium,
      'total_gram_magnesium': totalGramMagnesium,
      'total_percent_mangan': totalPercentMangan,
      'total_gram_mangan': totalGramMangan,
      'total_percent_molibdenum': totalPercentMolibdenum,
      'total_gram_molibdenum': totalGramMolibdenum,
      'total_percent_seng': totalPercentSeng,
      'total_gram_seng': totalGramSeng,
      'created_at': createdAt,
    };
  }

  factory ResultCountNutrientPerFertilizerModel.fromMap(Map<String, dynamic> map) {
    return ResultCountNutrientPerFertilizerModel(
      id: map['id'],
      idRacikan: map['id_racikan'],
      fertilizerName: map['fertilizer_name'],
      fertilizerWeightGrams: map['fertilizer_weight_grams'] ?? 0.0,
      totalPercentNitrogen: map['total_percent_nitrogen'] ?? 0.0,
      totalGramNitrogen: map['total_gram_nitrogen'] ?? 0.0,
      totalPercentPosfor: map['total_percent_posfor'] ?? 0.0,
      totalGramPosfor: map['total_gram_posfor'] ?? 0.0,
      totalPercentKalium: map['total_percent_kalium'] ?? 0.0,
      totalGramKalium: map['total_gram_kalium'] ?? 0.0,
      totalPercentBoron: map['total_percent_boron'] ?? 0.0,
      totalGramBoron: map['total_gram_boron'] ?? 0.0,
      totalPercentTembaga: map['total_percent_tembaga'] ?? 0.0,
      totalGramTembaga: map['total_gram_tembaga'] ?? 0.0,
      totalPercentBesi: map['total_percent_besi'] ?? 0.0,
      totalGramBesi: map['total_gram_besi'] ?? 0.0,
      totalPercentMagnesium: map['total_percent_magnesium'] ?? 0.0,
      totalGramMagnesium: map['total_gram_magnesium'] ?? 0.0,
      totalPercentMangan: map['total_percent_mangan'] ?? 0.0,
      totalGramMangan: map['total_gram_mangan'] ?? 0.0,
      totalPercentMolibdenum: map['total_percent_molibdenum'] ?? 0.0,
      totalGramMolibdenum: map['total_gram_molibdenum'] ?? 0.0,
      totalPercentSeng: map['total_percent_seng'] ?? 0.0,
      totalGramSeng: map['total_gram_seng'] ?? 0.0,
      createdAt: map['created_at'],
    );
  } 

  /// âœ… Convert dari Entity (domain layer) ke Model (data layer)
  factory ResultCountNutrientPerFertilizerModel.fromEntity(
      ResultCountNutrientPerFertilizerEntity entity) {
    return ResultCountNutrientPerFertilizerModel(
      id: entity.id,
      idRacikan: entity.idRacikan,
      fertilizerName: entity.fertilizerName,
      fertilizerWeightGrams: entity.fertilizerWeightGrams,
      totalPercentNitrogen: entity.totalPercentNitrogen,
      totalGramNitrogen: entity.totalGramNitrogen,
      totalPercentPosfor: entity.totalPercentPosfor,
      totalGramPosfor: entity.totalGramPosfor,
      totalPercentKalium: entity.totalPercentKalium,
      totalGramKalium: entity.totalGramKalium,
      totalPercentBoron: entity.totalPercentBoron,
      totalGramBoron: entity.totalGramBoron,
      totalPercentTembaga: entity.totalPercentTembaga,
      totalGramTembaga: entity.totalGramTembaga,
      totalPercentBesi: entity.totalPercentBesi,
      totalGramBesi: entity.totalGramBesi,
      totalPercentMagnesium: entity.totalPercentMagnesium,
      totalGramMagnesium: entity.totalGramMagnesium,
      totalPercentMangan: entity.totalPercentMangan,
      totalGramMangan: entity.totalGramMangan,
      totalPercentMolibdenum: entity.totalPercentMolibdenum,
      totalGramMolibdenum: entity.totalGramMolibdenum,
      totalPercentSeng: entity.totalPercentSeng,
      totalGramSeng: entity.totalGramSeng,
      createdAt: entity.createdAt ?? DateFormatUtil.formatDateToYYYYMMDD(DateTime.now())
    );
  }
}